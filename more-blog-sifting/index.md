---
title: "More blog sifting"
date: "2005-06-17"
categories: 
  - "solaris"
---

If you didn't see it, [Liane Praza](http://blogs.sun.com/roller/page/lianep) picked up where [my sifting](http://blogs.sun.com/roller/page/bmc/20050615#sifting_through_the_blogs) left off, adding [a blog entry pointing to more Opening Day entries](http://blogs.sun.com/roller/page/lianep/20050615#opensolaris_blogs_networking_drivers_security) -- this time in the categories of devices and device configuration, security, networking, and standards. But there are still a ton of entries to categorize, so picking up again in no particular order...

- **System calls.** System calls are the among most fundamental mechanisms in operating systems: they are the mechanism by which untrusted, unprivileged software requests a service of trusted, privileged software. We are lucky to have two great entries describing the architecture-specific mechanisms of system calls in Solaris: check out [Russ Blaine's](http://blogs.sun.com/roller/page/rab) entry on [system calls on x86](http://blogs.sun.com/roller/page/rab/20050614#x86_syscall_primer), and [Gavin Maltby's](http://blogs.sun.com/roller/page/gavinm) entry on [system calls on SPARC](http://blogs.sun.com/roller/page/gavinm/20050615#sparc_system_calls). Then, to understand the architectural-neutral aspects of system calls, head over to [Eric Schrock](http://blogs.sun.com/roller/page/eschrock)'s entry on [how to add a system call](http://blogs.sun.com/roller/page/eschrock/20050614#how_to_add_a_system).
    
    As a quick aside, that last entry is a great example of how we in Solaris Kernel Development are using blogs to write down information that (believe it or not) has just been an unspoked part of the craft before now. As [Tim Bray observed](http://www.tbray.org/ongoing/When/200x/2005/06/14/OpenSolaris-Blogs), blogs have become a critical conduit of information for us -- we believe that they are the most scalable way to get information from the people who have it to the people who need it. If (when?) you become an [OpenSolaris](http://opensolaris.org) developer, you can expect some friendly peer pressure to create a blog and [join the party](http://opensolaris.org/os/blogs/).
    
- **Build process and workspace management**. We pride ourselves on a seamless build process, and a couple of entries have gone into various aspects of this in depth. To give you an idea of how seriously we take the build process -- and why -- check out [Scott Rotondo's](http://blogs.sun.com/roller/page/rotondo) entry on [using lint to find security vulnerabilities](http://blogs.sun.com/roller/page/rotondo/20050614#using_lint_to_find_security). In particular, note what Scott says when he added a new lint option that generated 500 new warnings: "I needed to fix all of these before integrating my change to [Makefile.master](http://cvs.opensolaris.org/source/xref/usr/src/Makefile.master) because we require the Solaris source to be lint-clean." To which I add only, "dammit." Next, head over to [Jim Carlson's](http://blogs.sun.com/roller/page/carlson) entry describing the work he did to support [non-root builds](http://blogs.sun.com/roller/page/carlson/20050614#non_root_builds). Jim's entry demonstrates how difficult it is to radically change the build process -- and how he managed to pull it off. Finally, if you want to really let your makefile flag fly, check out [Mark Nelson's](http://blogs.sun.com/roller/page/mjnelson) entry describing [the build support for localized messages](http://blogs.sun.com/roller/page/mjnelson/20050614#did_you_get_the_message).
    
    In terms of workspace management, you'll want to check out [Will Fiveash's](http://blogs.sun.com/roller/page/wfiveash) entry describing [our workspace management tool, wx](http://blogs.sun.com/roller/page/wfiveash/20050614#wx_and_you_your_friend). For a long time, `wx` was a shell script in [Bonwick's](http://blogs.sun.com/bonwick) home directory. It was incredibly useful, but it was also easy to accidentally blow your brains out. (As [Bart](http://blogs.sun.com/barts) is fond of saying, it was "all blade and no handle.") Will's rewrite made for a much more safer, much more sophisticated `wx` -- and it was a huge help to us in automating the final approach of the [DTrace integration](http://blogs.sun.com/roller/page/bmc/20040725#the_big_putback).
    
- **Debuggability**. If you read just a couple of the [Opening Day entries](http://opensolaris.org/os/blogs/?startDate=2005-06-14), you probably noticed a trend: many of the entries were about finding some nasty bug in the system. This is an accurate reflection of our ethos in developing Solaris: the operating system must be reliable above all else, and we view debugging the operating system as our primary responsibility. This responsibility runs deeper than just the act of debugging, because our needs so outstripped existing tools that [we designed and built our own](http://opensolaris.org/os/community/observability/) -- most notably [mdb](http://opensolaris.org/os/community/mdb/) and [DTrace](http://opensolaris.org/os/community/dtrace/). Fortunately, we ship these tools to you, so you can use them on your own system and on your own applications.
    
    There are many entries describing these tools and how they were used to tackle a problem. Fittingly, a good place to start is [Mike Shapiro's](http://blogs.sun.com/roller/page/mws) entry describing [using mdb to debug a sendmail bug](http://blogs.sun.com/roller/page/mws/20050614#sendmail_died_in_a_two). This bug is described in [4278156](http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4278156), which has one of the greatest bug synopses of all time: "sendmail died in a two SIGALRM fire." 1 For more on the power of mdb, take a look at [Eric Saxe's](http://blogs.sun.com/roller/page/esaxe) entry on [using mdb to debug a scheduling problem](http://blogs.sun.com/roller/page/esaxe/20050614#debugging_solaris_scheduling_problems_and), [Ashish Mehta's](http://blogs.sun.com/roller/page/amehta) entry on [using mdb to debug a race condition](http://blogs.sun.com/roller/page/amehta/20050617#a_race_erased), and [Eric Kustarz's](http://blogs.sun.com/roller/page/erickustarz) entry demonstrating an mdb debugger command ("dcmd") that he wrote to [retrieve NFSv4 recovery messages postmortem](http://blogs.sun.com/roller/page/erickustarz/20050614#nfsv4_client_s_recovery_messages). This last example is a particularly good one because this is exactly the kind of custom debugging infrastructure that mdb's modular architecture makes easy to build. For a comprehensive example of how we have developed subsystem-specific debugging infrastructure, read [Sasha Kolbasov's](http://blogs.sun.com/roller/page/akolb) entry on the [mdb dcmds related to STREAMS](http://blogs.sun.com/roller/page/akolb/20050615#mdb_for_streams). As Sasha mentions, the place to start for learning to write your own modules is the [documentation](http://docs.sun.com/app/docs/doc/816-5041) -- but you can get a flavor for it by reading [Yu Xiangning's](http://blogs.sun.com/roller/page/yu) entry on writing a [writing a module for kmdb](http://blogs.sun.com/roller/page/yu/20050614#how_to_write_a_kmod). kmdb is the in-situ kernel debugger that implements mdb, and when you need it, nothing else will do -- as [Dan Mick](http://blogs.sun.com/roller/page/dmick) describes in his entry on [debugging with kmdb and moddebug](http://blogs.sun.com/roller/page/dmick/20050615#diagnosing_kernel_hangs_panics_with). For more details on kmdb itself, check out [Matt Simmons'](http://blogs.sun.com/roller/page/simmonmt) entry on [kmdb's design and implementation](http://blogs.sun.com/roller/page/simmonmt/20050614). To see how mdb can help debug your application, take a look at [Will Fiveash's](http://blogs.sun.com/roller/page/wfiveash) notes on using [debugging application memory problems](http://blogs.sun.com/roller/page/wfiveash/20050614#playing_with_solaris_memory_debuggers). Will mentions `::findleaks`, a debugger command that I originally implemented for kernel crash dumps, and that [Jonathan Adams](http://blogs.sun.com/roller/page/jwadams) subsequently ported to work on application core files and -- as he mentions in his entry -- [reworking it substantially](http://blogs.sun.com/roller/page/jwadams/20050614#the_implementation_of_findleaks) in the process.
    
    While mdb is the acme of postmortem debugging, if the manifestation of a bug is _non-_fatal, it's often more effective to use DTrace to debug it. For an exanple of this, look at [Bart Smaalders'](http://blogs.sun.com/roller/page/barts) entry on [using DTrace to debug jitter](http://blogs.sun.com/roller/page/barts/20050614#doing_the_jitter_bug). It was gratifying to see Bart debug this problem using DTrace, because latency bubbles were actually one of the motivating pathologies behind DTrace. And finally, debuggability doesn't end with tools; subsystems must be designed with debuggability in mind, as [Stephen Hahn](http://blogs.sun.com/roller/page/sch) describes in his entry on [designing libuutil for debuggability](http://blogs.sun.com/roller/page/sch/20050614#libuutil_and_designing_for_debuggability).
    

I think that about does it for today. As someone pointed out on Liane's blog, we need a Wiki for this; we agree -- it's on the list of planned enhancements for [opensolaris.org](http://opensolaris.org). Until then, stay tuned for more sifting...

* * *

Technorati tags: [OpenSolaris](http://technorati.com/tag/OpenSolaris) [Solaris](http://technorati.com/tag/Solaris) [DTrace](http://technorati.com/tag/DTrace) [mdb](http://technorati.com/tag/mdb)
