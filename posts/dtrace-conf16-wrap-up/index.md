---
title: "dtrace.conf(16) wrap-up"
date: "2016-07-29"
---

Something that got a little lost in the excitement of [Samsung's recent acquisition of Joyent](https://www.joyent.com/blog/samsung-acquires-joyent-a-ctos-perspective) was [dtrace.conf(16)](https://twitter.com/bcantrill/status/735539536793460736), our quadrennial (!) unconference on DTrace. The videos are up, and in the spirit of [Adam Leventhal](http://dtrace.org/blogs/ahl/)'s excellent wrap-ups from [dtrace.conf(08)](http://dtrace.org/blogs/ahl/2008/05/05/dtrace-conf-post-post-mortem/) and [dtrace.conf(12)](http://dtrace.org/blogs/ahl/2012/04/09/dtrace-conf12-wrap-up/), I wanted to provide a survey of the one-day conference and its content.

Once again, it was an eclectic mix of technologists -- and once again, the day got kicked off with me providing [an introduction to dtrace.conf and its history](https://www.joyent.com/about/events/2016/dtrace-conf/videos/introduction). (Just to save you the time filling out your Cantrill Presentation Bingo Card: you can find me punching myself at 16:19, me offering unsolicited personal medical history at 20:11, and me getting trolled by unikernels at 38:25.)

Some at the conference (okay, one) had never seen or used DTrace before, so to get brains warmed up, [Max Bruning](https://twitter.com/mrbruning) gave [a quick introduction to DTrace -- featuring a real problem](https://www.joyent.com/about/events/2016/dtrace-conf/videos/useful-dtrace-info). (The problem that Max examined is a process running on [LX-branded zones on SmartOS](https://www.youtube.com/watch?v=lnesNFulpPE).)

Next up was [Graeme Jenkinson](http://www.cl.cam.ac.uk/~gcj21/) from the University of Cambridge on [distributed tracing](https://www.joyent.com/about/events/2016/dtrace-conf/videos/distributed-dtrace) featuring [CADETS](http://www.cl.cam.ac.uk/research/security/cadets/), a system with a DTrace-inspired query language called Event Query.

We then started a troika of presentations on core DTrace improvements, starting with [George Neville-Neil](https://www.linkedin.com/in/george-neville-neil-94a5679) on [core D language improvements](https://www.joyent.com/about/events/2016/dtrace-conf/videos/d-language-improvements), some of which have been prototyped and others of which represent a wish list. This led into [Matt Ahrens](http://open-zfs.org/wiki/User:Mahrens) (of ZFS fame) on [D syntactic sugar](https://www.joyent.com/about/events/2016/dtrace-conf/videos/d-syntactic-sugar): language extensions that Matt implemented for D to make it easier to write more complicated (and more maintainable) scripts. A singular point of pride for me personally is how much DTrace was used to implement and debug ZFS: Matt has used DTrace as much as anyone, and anything that he feels he needs to make his life easier is something that will almost certainly benefit all DTrace users. First among these: [support for "if"/"else"](https://www.illumos.org/issues/7085), a change that since dtrace.conf has gone through code review and is poised to integrate into DTrace! The final presentation in this segment on core improvements was Joyent engineer [Robert Mustacchi](https://twitter.com/rmustacc) on [CTF everywhere](https://www.joyent.com/about/events/2016/dtrace-conf/videos/ctf-everywhere), outlining work that Robert and Adam did in 2013 to bring [user-level CTF understanding to DTrace](http://dtrace.org/blogs/rm/2013/11/14/userland-ctf-in-dtrace/).

The next group of presentations focused more on how DTrace is used, kicking off with [Eric Saxby](https://twitter.com/ecdysone) on [DTracing applications](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtracing-apps), with a particular focus on instrumenting Ruby programs using [Chris Andrews](http://chrisa.github.io/)' excellent [libusdt](https://github.com/chrisa/libusdt). When instrumenting upstack, we found that it's useful for DTrace to pull apart JSON -- and Joyent engineer [Joshua Clulow](https://github.com/jclulow) presented next on the [DTrace JSON subroutine](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-json-subroutine) that he implemented a few years ago. (And because I know you're dying to know: Josh's presentation is on [vtmc](https://github.com/jclulow/vtmc), terminal-based presentation software unsurprisingly of his own creation.) Wrapping up this section was [Dan McDonald](https://github.com/danmcd) talking about the challenges of DTrace-based [dynamic asserts](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dynamic-asserts): because of the ubiquity of asserts, we really need to add [is-enabled probes](http://dtrace.org/blogs/ahl/2006/05/08/user-land-tracing-gets-better-and-better/) to the kernel to support dynamic asserts -- an improvement that is long overdue, and that we will hopefully implement before 2020!

In the penultimate group of presentations, we got into some system-specific instrumentation and challenges, starting with [James Nugent](https://twitter.com/jen20) on [DTrace and Go](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-and-go). The problem he refers to as preventing "Go and DTrace from working very well together" is the fact that Go doesn't preserve frame pointers on x86 -- but the good news is that this has changed and [frame pointers will be preserved starting in 1.7](https://twitter.com/davecheney/status/735997272882712577), making DTrace on Go much more useful! After James, Joyent engineer [Dave Pacheco](https://twitter.com/dapsays) described his experiences of using [DTrace and Postgres](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-and-postgres). For our [Manta object storage system](https://github.com/joyent/manta), Postgres is a [critical component](https://www.joyent.com/blog/manta-postmortem-7-27-2015) and understanding it dynamically and in production has proved essential for us. George Neville-Neil then took the stage again to discuss [performance improvements with always-on instrumentation](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-performance-improvements-with-always-on-instrumentation). (Notable quote: "this is being recorded, but I'll say it anyway.") [Gordon Marler](https://www.linkedin.com/in/gordonmarler) from Bloomberg discussed the challenges of instrumenting massive binaries with thousands of shared objects, consisting of multiple languages (C, C++ and -- pause for effect -- Fortran 77) and millions of symbols (!!) -- which necessitated [DTrace ustack performance improvements](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-ustack-performance-improvements) via some custom (and optimized) postprocessing.

The final group of presentations kicked off with Joyent engineer [Alex Wilson](https://github.com/arekinath) and me presenting [DTrace in the zone](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-in-the-zone) and the DTrace privilege model, which is an important (if ominous) precursor for a very interesting presentation: security researcher Ben Murphy describing his diabolically clever work on [DTrace exploitation](https://www.joyent.com/about/events/2016/dtrace-conf/videos/dtrace-exploitation).

As the last presentation of the day (as we felt it would be a good segue to drinks), George Neville-Neil led a brief discussion on what he calls [OpenDTrace](https://www.joyent.com/about/events/2016/dtrace-conf/videos/opendtrace-a-modest-proposal) -- but is really about sharing the DTrace code more effectively across systems. (DTrace itself is entirely open source, so "OpenDTrace" is something of a redundancy.) George kicked off an [OpenDTrace organization on GitHub](https://github.com/opendtrace) and it currently holds scripts and the DTrace toolkit, with the aspirations of potentially mirroring the [OpenZFS effort](http://open-zfs.org/wiki/Main_Page) to encourage cross-platform development and collaboration.

After George wrapped up, we celebrated the passing of another quadrennial in traditional DTrace fashion: with cans of Tecate and exhilarating rounds of [Fishpong](https://github.com/fishpong/docs/wiki/Primer). And for you, dear reader, we have a bonus for you for managing to read this far: if you weren't able to make it to the conference, we have a few extra dtrace.conf(16) t-shirts. To get one of these, [e-mail us](mailto:marketing@joyent.com?Subject=dtrace.conf(16)%20t-shirt) your size, address, and maybe a sentence or two on how you use or have used DTrace. Supplies are (obviously) limited; if you miss out, you'll have to wait until the next dtrace.conf in 2020!
