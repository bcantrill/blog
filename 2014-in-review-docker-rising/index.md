---
title: "2014 in review: Docker rising"
date: "2015-01-02"
---

When looking back on 2014 from an infrastructure perspective, it's hard not to have one word on the lips: Docker. (Or, as we are wont to do in Silicon Valley when a technology is particularly hot, have the same word on the lips three times over Ã  la [Gabbo](http://simpsons.wikia.com/wiki/Gabbo): "Docker, Docker, DOCKER!") While Docker has existed since 2013, 2014 was indisputably the year in which it transcended from an interesting project to a transformative technology -- a shift which had profound ramifications for us at Joyent.

The enthusiasm for Docker has been invigorating: it validates Joyent's core hypothesis that OS-based virtualization is the infrastructure substrate of the future. That said, going into 2014, there was also a clear impedance mismatch: while Docker was refreshingly open to being cross-platform, the reality is that it was being deployed exclusively on Linux -- and that the budding encyclopedia of Docker images was exclusively Linux-based. Our operating system, [SmartOS](https://smartos.org/), is an illumos derivative that it many ways is similar to Linux (they're both essentially Unix, after all), but it's also different enough to be an impediment. So the arrival of Docker in 2013 left us headed into 2014 with a kind of dilemma: how can we enable Docker on our proven SmartOS-based substrate for OS containers while still allowing existing Linux-based images to function?

Into this quandary came a happy accident: David Mackay, an illumos community member, revived [lx branded zones](https://wiki.smartos.org/display/DOC/LX+Branded+Zones), work that had been explored some number of years ago to execute complete Linux binary environments in an illumos zone. This work was so old that, frankly, we didn't feel it was likely to be salvageable -- but we were pleasantly surprised when it seemed to [still function for some modern binaries](http://www.listbox.com/member/archive/182179/2014/01/sort/time_rev/page/2/entry/0:171/20140115122252:AF7F3336-7E09-11E3-A070-B92BA60CD128/). (If it needs to be said, this is yet another example of why we so fervently believe in open source: it allows for others to explore ideas that may seem too radical for commercial entities with mortgages to pay and mouths to feed.)

Energized by the community, Joyent engineer [Jerry Jelinek](https://github.com/jjelinek) went to work in the spring, bolstering the emulation layer and getting it to work with progressively more and more modern Linux systems. By late summer, 32-bit was working remarkably well on Ubuntu 14.04 (an odyssey that I detailed in my [illumos day Surge presentation](http://www.slideshare.net/bcantrill/illumos-lx)) and we were ready to make an attempt at the summit: 64-bit Linux emulation. Like much bringup work, the 64-bit work was excruciating because it was very hard to forecast: you can be one bug away from a functioning system or a hundred -- and the only way to really know is to grind through them all. Fortunately, we are nothing if not persistent, and by late fall we had 64-bit working on most stuff -- and thanks to early adopter community members like [Jorge Schrauwen](https://twitter.com/sjorge), we were able to quickly find increasingly obscure software to validate it against. (Notes to self: (1) ["Cabal hell"](http://www.reddit.com/r/haskell/comments/2al3vx/how_do_you_avoid_the_cabal_hell/) is a thing and (2) I bet HHVM is unaware of the [implicit dependency they have on Linux address space layout](https://smartos.org/bugview/OS-3611).)

With the LX branded zone work looking very promising, Joyent engineer [Josh Wilsdon](https://github.com/joshwilsdon) led a team studying Docker to determine the best way to implement it on SmartOS for our orchestration software, [SmartDataCenter](https://github.com/joyent/sdc). In doing this, we learned about [a great Docker strength](https://www.joyent.com/blog/dockers-killer-feature): [its remote API](https://docs.docker.com/reference/api/docker_remote_api/). This API allows us to do exactly what robust APIs have allowed us to do for time immemorial: replace one implementation with a different one without breaking upstack software. Implementing a Docker API endpoint would also allow for a datacenter-wide Docker view that would solve many other problems for us as well; in late autumn, we set out building [sdc-docker](https://github.com/joyent/sdc-docker), a Docker engine for SDC that we have been developing in the open. As with the LX branded zone work, we are far enough along to validate the approach: we know that we can make this work.

In parallel to these two bodies of work, a third group of Joyent engineers led by [Robert Mustacchi](https://twitter.com/rmustacc) was tackling a long-standing problem: extending the infrastructure present in SmartOS for robust (and secure!) [network virtualization for OS containers](http://en.wikipedia.org/wiki/OpenSolaris_Network_Virtualization_and_Resource_Control) to the formation of virtual layer two networks that can span an entire datacenter (that is, finally breaking the shackles of [.1q VLANs](http://en.wikipedia.org/wiki/IEEE_802.1Q)). We have wanted to do this for quite some time, but the rise of Docker has given this work a new urgency: of the Linux problems with respect to OS-based containers, network virtualization is clearly among the most acute -- and we have heard over and over again that it has become an impediment to Docker in production. Robert and team [have made great progress](http://dtrace.org/blogs/rm/2014/09/23/illumos-overlay-networks-development-preview-02/) and by the end of 2014 had the first signs of life from the SDC integration point for this work.

The SmartDataCenter-based aspects of our Docker and network virtualization work embody an important point of distinction: while OpenStack has been accused of being ["a software particle-board designed by committee"](https://twitter.com/cloudpundit/status/550070214579478528), SDC has been deliberately engineered based on our experience actually running a public cloud at scale. That said, OpenStack has had one (and arguably, only one) historic advantage: it is open source. While the components of SDC (namely, SmartOS and node.js) have been open, SDC itself was not. The rise of Docker -- and the clear need for an open, container-based stack instead of some [committee-designed VMware retread](http://stochasticresonance.wordpress.com/2013/11/04/openstack-a-plea/) -- allowed us to summon the organizational will to take an essential leap: on November 6th, we [open sourced SDC and Manta](https://www.joyent.com/blog/sdc-and-manta-are-now-open-source).

Speaking of [Manta](https://github.com/joyent/manta): with respect to containers, Joyent has been living in the future (which, in case it sounds awesome, is actually very difficult; being ahead of the vanguard is a decidedly mixed blessing). If the broader world is finally understanding the merits of OS-based virtualization with respect to standing compute, it still hasn't figured out that it has profound ramifications for scale-out storage. However, with the rise of Docker in 2014, we have more confidence than ever that this understanding will come in due time -- and by open sourcing Manta we hope to accelerate it. (And certainly, you can imagine that we'll help connect the dots by allowing Manta jobs to be phrased as Docker containers in 2015.)

Add it all up -- the enthusiasm for Docker, the great progress of the LX-branded zone work, the Docker engine for SDC, the first-class network virtualization that we're building into the system -- and then give it the kicker of an entirely open source SmartDataCenter and Manta, and you can see that it's been a hell of a 2014 for us. Indeed, it's been a hell of a 2014 for the entire Docker community, and we believe that [Matt Asay](https://twitter.com/mjasay) got it exactly right when [he wrote](http://readwrite.com/2014/12/23/docker-to-dominate-in-2015) that "Docker, hot as it was in 2014, will be even hotter in 2015."

So here's to a hot 2014 -- and even hotter 2015!
