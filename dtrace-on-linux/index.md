---
title: "DTrace on Linux"
date: "2008-06-30"
categories: 
  - "solaris"
---

The interest in DTrace on Linux is heating up again -- this time in [an inferno on the Linux 2008 Kernel Summit discussion list](https://lists.linux-foundation.org/pipermail/ksummit-2008-discuss/2008-June/000149.html). Under discussion is SystemTap, the [Linux-born DTrace-knockoff](http://blogs.sun.com/ahl/entry/dtrace_knockoffs), with people like [Ted Ts'o](http://thunk.org/tytso/) explaining why they find SystemTap generally unusable (["Do you really expect system administrators to use this tool?"](https://lists.linux-foundation.org/pipermail/ksummit-2008-discuss/2008-June/000171.html)) and in stark contrast to DTrace (["it just works"](https://lists.linux-foundation.org/pipermail/ksummit-2008-discuss/2008-June/000160.html)).

While the comparison is clearly flattering, I find it a bit disappointing that no one in the discussion seems to realize that DTrace "just works" not merely my implementation, but also **by design**. Over and over again, we made architectural and technical design decisions that would yield an instrumentation framework that would be not just safe, powerful and flexible, _but also usable_. The subtle bit here is that many of those decisions were not at the surface of the system (where the discussion on the Linux list seems to be currently mired), but in its guts. To phrase it more concretely, innovations like [CTF](http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/sys/ctf.h#38), [DOF](http://cvs.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/sys/dtrace.h#509) and [provider-specified stability](http://wikis.sun.com/display/DTrace/Stability) may seem like mind-numbing, arcane implementation detail (and okay, they probably are that too), but they are the foundation upon which the usability of DTrace is built. If you don't solve the problems that they solve, you won't have a system anywhere near as usable as DTrace.

So does SystemTap appreciate either the importance of these problems or the scope of their solutions? Almost certainly not -- for if they did, they would come to the same conclusion that technologists at Apple, QNX, and the FreeBSD project have come to: **the only way to have a system at parity with DTrace is to port DTrace**.

Fortunately for Linux users, there are some in the community who _have_ made this realization. In particular, [Paul Fox](http://www.crisp.demon.co.uk/blog/index.html) has [a nascent port of DTrace to Linux](ftp://crisp.dynalias.com/pub/release/website/dtrace). Paul still has a long way to go (and I'm sure he could use whatever help Linux folks are willing to offer) but it's impossible to believe that Paul isn't on a shorter and more realistic path than SystemTap to achieving safe, powerful, flexible -- and usable! -- dynamic Linux instrumentation. Good luck to you Paul; we continue to be available to help where we can -- and may the Linux community realize the value of your work sooner rather than later!
